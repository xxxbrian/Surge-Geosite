export type PanelLang = "zh" | "en";

export const translations = {
  zh: {
    langZh: "简中",
    langEn: "EN",
    mainTitle: "Surge Geosite",
    subTitle: "把上游 geosite 数据集转换为 Surge 可用规则，开箱即用。",
    datasetsTitle: "数据集列表",
    searchPlaceholder: "搜索数据集，例如 google",
    selectedDatasetLabel: "当前选中",
    filterLabel: "标签过滤",
    manualFilterLabel: "手动标签（可选）",
    manualFilterPlaceholder: "例如 cn",
    loadRules: "加载规则",
    etagLabel: "upstream etag:",
    staleLabel: "旧版本回退:",
    modeLabel: "模式:",
    rulesLabel: "规则数量:",
    rulePreviewTitle: "规则预览",
    openRawUrl: "打开原始链接",
    datasetInfoTitle: "数据集信息",
    sourceFileLabel: "源文件:",
    filterCountLabel: "过滤数量:",
    quickLinksTitle: "快捷链接",
    loading: "loading...",
    selectDataset: "请选择一个数据集。",
    noMatch: "没有匹配数据集",
    switchedDatasetLoading: "已切换到 {name}，正在加载默认规则…",
    modeSwitchLoading: "已切换到 {mode} 模式，正在加载…",
    filterSwitchLoading: "标签已切换，正在加载…",
    filterInputLoading: "手动标签已更新，正在加载…",
    emptyResult: "(空结果)",
    listsCount: "{count} 个数据集",
    initializing: "初始化中...",
    upstreamInitializing: "上游正在初始化（{current}/{total}），请稍候…",
    dataNotReady: "geosite 数据暂未就绪",
    failedLoad: "加载 /geosite 失败\\n{message}",
    requestFailed: "请求失败：{message}",
    indexEmpty: "数据索引为空",
    yes: "是",
    no: "否",
    noneOption: "(无)",
    error: "错误"
  },
  en: {
    langZh: "ZH",
    langEn: "EN",
    mainTitle: "Surge Geosite",
    subTitle: "Geosite datasets, converted for Surge and ready to use.",
    datasetsTitle: "DATASETS",
    searchPlaceholder: "Search datasets, e.g. google",
    selectedDatasetLabel: "SELECTED DATASET",
    filterLabel: "Filter Tag",
    manualFilterLabel: "Manual Tag (Optional)",
    manualFilterPlaceholder: "e.g. cn",
    loadRules: "Load Rules",
    etagLabel: "upstream etag:",
    staleLabel: "stale fallback:",
    modeLabel: "mode:",
    rulesLabel: "rules:",
    rulePreviewTitle: "RULE PREVIEW",
    openRawUrl: "Open Raw URL",
    datasetInfoTitle: "DATASET INFO",
    sourceFileLabel: "source file:",
    filterCountLabel: "filter count:",
    quickLinksTitle: "QUICK LINKS",
    loading: "loading...",
    selectDataset: "Please select a dataset.",
    noMatch: "No datasets matched",
    switchedDatasetLoading: "Switched to {name}, loading default rules...",
    modeSwitchLoading: "Mode switched to {mode}, loading...",
    filterSwitchLoading: "Filter changed, loading...",
    filterInputLoading: "Manual filter updated, loading...",
    emptyResult: "(empty result)",
    listsCount: "{count} lists",
    initializing: "initializing...",
    upstreamInitializing: "Upstream is initializing ({current}/{total}), please wait...",
    dataNotReady: "geosite data not ready",
    failedLoad: "Failed to load /geosite\\n{message}",
    requestFailed: "Request failed: {message}",
    indexEmpty: "index is empty",
    yes: "yes",
    no: "no",
    noneOption: "(none)",
    error: "error"
  }
} as const;

export function detectPreferredLang(): PanelLang {
  const saved = localStorage.getItem("panel-lang");
  if (saved === "zh" || saved === "en") {
    return saved;
  }
  return navigator.language.toLowerCase().startsWith("zh") ? "zh" : "en";
}
